<script setup>
import "../../assets/css/components/utils/_player.scss";
import Avatar from "./Avatar.vue";
import { useI18n } from "vue-i18n";
import { useUserStore } from "../../stores/user.js";

const { t } = useI18n();
const userStore = useUserStore();
const user = userStore.user;

defineProps({
  player: {
    type: Object,
    default: {
      id: "",
      pseudo: "",
      role: "empty",
      image: "",
    },
  },
});
</script>

<template>
  <div
   :class="[
     'player',
      {
        'player--empty': player.role === 'empty',
        'player--you': player.id === user.id,
      }
   ]"
  >
    <div class="player__container">
      <div class="player__profile">
        <Avatar
          type="player"
          :selected="player.image"
        />
        <p
          class="player__pseudo"
          v-if="player.pseudo"
        >
          {{ player.pseudo }}
        </p>
        <p
          class="player__pseudo"
          v-else
        >
          {{ t('empty') }}
        </p>
      </div>
      <div
        class="player__host"
        v-if="player.role === 'host'"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">
          <path d="M5.3919 2.8407C5.81222 1.79284 6.02238 1.26891 6.36382 1.1963C6.4536 1.1772 6.5464 1.1772 6.63617 1.1963C6.97762 1.26891 7.18778 1.79284 7.6081 2.8407C7.84713 3.4366 7.96664 3.73455 8.19027 3.9372C8.253 3.99404 8.32109 4.04466 8.39359 4.08836C8.65206 4.24415 8.97472 4.27304 9.62005 4.33084C10.7125 4.42867 11.2587 4.47759 11.4255 4.78903C11.46 4.85353 11.4835 4.92336 11.495 4.99563C11.5503 5.34457 11.1487 5.70989 10.3456 6.44054L10.1226 6.64343C9.74715 6.98502 9.55942 7.15582 9.45083 7.36897C9.3857 7.49683 9.34202 7.63453 9.32156 7.77656C9.28744 8.01333 9.34242 8.2611 9.45237 8.75665L9.49165 8.9337C9.68882 9.82238 9.78741 10.2667 9.66434 10.4851C9.5538 10.6813 9.35018 10.8069 9.12525 10.8177C8.87484 10.8296 8.522 10.5421 7.81632 9.96709C7.3514 9.58824 7.11893 9.39882 6.86087 9.32482C6.62504 9.2572 6.37496 9.2572 6.13913 9.32482C5.88107 9.39882 5.6486 9.58824 5.18368 9.96709C4.478 10.5421 4.12516 10.8296 3.87475 10.8177C3.64982 10.8069 3.4462 10.6813 3.33566 10.4851C3.21259 10.2667 3.31118 9.82239 3.50835 8.9337L3.54763 8.75665C3.65758 8.2611 3.71255 8.01333 3.67844 7.77656C3.65798 7.63453 3.6143 7.49683 3.54917 7.36897C3.44058 7.15582 3.25285 6.98502 2.87739 6.64343L2.65437 6.44054C1.85128 5.70989 1.44973 5.34457 1.50503 4.99563C1.51649 4.92336 1.53997 4.85353 1.57452 4.78903C1.74132 4.47759 2.28753 4.42867 3.37995 4.33084C4.02528 4.27304 4.34794 4.24415 4.60641 4.08836C4.67891 4.04466 4.747 3.99404 4.80973 3.9372C5.03336 3.73455 5.15287 3.4366 5.3919 2.8407Z"stroke-width="1.30926"/>
        </svg>
      </div>
    </div>
  </div>
</template>